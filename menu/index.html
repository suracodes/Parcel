<!DOCTYPE html>
<html>
<head>
    <title>PARCEL - Search</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://parcel.com/style.css" rel="stylesheet" type="text/css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600&display=swap" rel="stylesheet">
</head>
<body>
    <div class="header">
        <div class="header-bar">
            <div class="nav-item">
                <a href="/" style="text-decoration: none;">
                    <div class="site-title">PARCEL</div>
                </a>
            </div>
            <div class="nav-item nav-menu">
                <a href="/about" class="nav-menu-item">About</a>
                <a href="/workings" class="nav-menu-item">How it Works</a>
            </div>
        </div>
        <div class="header-input-section">
            <div class="header-title">
                <h1>Restaurant Search</h1>
            </div>
            <div class="header-search">
                <form id="location-form">
                    <input 
                        type="text" 
                        id="location-search-box" 
                        class="search-section search-text" 
                        placeholder="Search for a restaurant">
                    <button class="search-section search-icon" type="submit">Submit</button>
                </form>
            </div>
            <style>
                #location-search-box {
                    width: 300px;
                    padding: 10px;
                    border: 1px solid #ccc;
                }
            </style>
            <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB8buxJtU6K4uRSDdiVHFGOSYVcAfYWuuU&libraries=places"></script>
            <script>
                function initialize() {
                    var input = document.getElementById('location-search-box');
                    var autocomplete = new google.maps.places.Autocomplete(input);
                    var selectedPlace;

                    google.maps.event.addListener(autocomplete, 'place_changed', function() {
                        selectedPlace = autocomplete.getPlace();
                    });

                    document.getElementById('location-form').addEventListener('submit', function(event) {
                        event.preventDefault();

                        if (selectedPlace) {
                            var placeId = selectedPlace.place_id;
                            window.location = "/food-search?location=" + placeId + "&name=" + selectedPlace.name;
                        }
                    });
                }

                google.maps.event.addDomListener(window, 'load', initialize);
            </script>        
        </div>
    </div>

    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-7QPJK74EEM"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-7QPJK74EEM');
    </script>
</body>
</html>
